matrix:
  TAG: [12, 14, 16, 18, 20, 22]

when:
  - event: push
    branch: master
    path: { include: [ "chrnodejs/**" ] }

steps:
  - name: publish-chrnodejs
    image: woodpeckerci/plugin-docker
    settings:
      registry: ghcr.io
      repo: ghcr.io/${CI_REPO_OWNER}/esdock
      username: ${CI_REPO_OWNER}
      password:
        from_secret: REGISTRY_TOKEN
      context: chrnodejs
      dockerfile: chrnodejs/${TAG}/Dockerfile
      tags: chrnodejs_${TAG}
      platforms: linux/amd64
